<%= render Avo::TurboFrameWrapperComponent.new(params[:turbo_frame]) do %>
  <% if @via_model.summary_entries.present? %>
    <div class="flex flex-col">
      <%= render Avo::PanelComponent.new(name: '') do |c| %>
        <% c.body do %>
          <div class="relative flex items-center">
            <div class="flex-grow border-t border-gray-400"></div>
            <span class="flex-shrink mx-4 text-gray-400">Summary</span>
            <div class="flex-grow border-t border-gray-400"></div>
          </div>
          <table class="w-full px-4 bg-white">
            <tbody class="divide-y">
              <% if @via_model.respond_to?(:rabatt_entry) %>
                <% rabatt_entry = @via_model.rabatt_entry %>
                <%= render  'summary_row', locals: {price:rabatt_entry.price.to_brutto_currency ,
                  title: t(:rabatt, scope: :shared), rabatt: true, rabatt_entry_id: rabatt_entry.id, id: @via_model.id } if rabatt_entry %>
              <% end %>
              <% price = @via_model.price %>

              <% brutto_editable = @via_model.is_a?(Issue) ? true : false  %>
              <%=
                render  'summary_row', locals: {price:price.to_brutto_currency ,
                title: t(:brutto_sum, scope: :shared) ,bold: true, brutto_sum: true,
                id: @via_model.id,
                first_entry_id: @via_model.summary_entries.first.id,
                brutto_editable: brutto_editable}
              %>
            </tbody>
          </table>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% end%>